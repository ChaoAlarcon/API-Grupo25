<!DOCTYPE html>
<html lang="es">
<head>
  <!-- Configuración del documento -->
  <meta charset="UTF-8"> <!-- Codificación de caracteres UTF-8 -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0"> <!-- Adaptación para dispositivos móviles -->
  <title>Dragon Ball Universe - Search Engine</title> <!-- Título de la página -->

  <!-- Ícono de la pestaña del navegador -->
  <link rel="icon" type="image/png" href="lupa2.png">

  <!-- Inclusión de Bootstrap CSS para estilos -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  
  <!-- Inclusión de Bootstrap Icons para íconos -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css">
  
  <!-- Hoja de estilos personalizada -->
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <!-- Barra de íconos lateral superior -->
  <header class="header justify-content-center align-items-center row">
    <div class="col-6 align-items-center">
  <button class="reset align-items-center" id="resetBtn">
    <img src="reset.png" alt="Lupa Icono" class="icono-pequeño align-items-center ">Reset
  </button> <!-- Botón para reiniciar la página -->
  </div>
  <div class="col-6 align-items-center">
   <p class="creditos-header">
    Hecho con 
    <img src="https://freesvg.org/img/1646656079PixelArt-Heart-1.png" alt="Corazón pixelado" class="pixel-heart">
    por Chao, Nicolás y Álvaro –
    <a href="https://github.com/ChaoAlarcon/Dragon-Ball-API" target="_blank">Repositorio en GitHub</a>
  </p>
  </div>
  </header>




  <!-- Sección principal de contenido -->
  <section class="container">
    <!-- Título principal -->
     <div class="big-title row align-items-center Título" >
    <div class="window-titlebar" >
        <span class="title">Mensaje del sistema</span> <!-- Título de la ventana -->
      <button class="cerrar" onclick="hideTitle()">X</button> <!-- Botón para ocultar esta sección -->
      </div>
     <h1 class="text-xl-center title" style="margin-top: 10px; margin-bottom: 30px;">
        <img src="lupa.png" alt="Lupa Icono" class="icono"> <!-- Ícono de lupa -->
        Dragon Ball Universe - DataBase <!-- Título de la aplicación -->
      </h1>
      
    </div>

    <!-- Sección de botones para modales -->
     <div class="big-title row align-items-center Subtítulo" >
    <div class="window-titlebar">
        <span class="title">Mensaje del sistema</span> <!-- Título de la ventana -->
      <button class="cerrar" onclick="hideTitle2()">X</button> <!-- Botón para ocultar esta sección -->
      </div>
      <!-- Botón para abrir el modal de series -->
      <button type="button" class="Botones-centrales border-5 rounded-0 col-3" data-bs-toggle="modal" data-bs-target="#seriesModal">
        <h2>Series</h2>
      </button>
      <!-- Botón para abrir el modal de autor -->
      <button type="button" class=" Botones-centrales  border-5 rounded-0 col-3" data-bs-toggle="modal" data-bs-target="#autorModal">
        <h2>Autor</h2>
      </button>
      <!-- Botón para abrir el modal de créditos -->
      <button type="button" class=" Botones-centrales border-5 rounded-0 col-3" data-bs-toggle="modal" data-bs-target="#creditsModal">
        <h2>Créditos</h2>
      </button>
      
    </div>

   

    <!-- Modal de Series -->
    <div class="modal fade modal-fullscreen" id="seriesModal" tabindex="-1" aria-labelledby="instructionsModalLabel" aria-hidden="true">
      <div class="modal-dialog modal-dialog-centered-custom justify-content-center">
        <div class="modal-content window soft-shadow" style="padding:0; width: 800px; height: 600px; overflow-y: auto;">
          <div class="window-titlebar">
            <span class="title">Mensaje del sistema</span> <!-- Título del modal -->
            <button class="cerrar" data-bs-dismiss="modal">X</button> <!-- Botón para cerrar el modal -->
          </div>
          <div class="modal-body" style="padding: 20px; font-size:35px;">
            <p>Series de Dragon Ball:</p>
            <div style="display: flex; flex-direction: column; gap: 10px;">
              <!-- Botones para cada serie de Dragon Ball -->
              <button type="button" class="button" style="padding: 8px; font-size: 14px;">Dragon Ball</button>
              <button type="button" class="button" style="padding: 8px; font-size: 14px;">Dragon Ball Z</button>
              <button type="button" class="button" style="padding: 8px; font-size: 14px;">Dragon Ball GT</button>
              <button type="button" class="button" style="padding: 8px; font-size: 14px;">Dragon Ball Z Kai</button>
              <button type="button" class="button" style="padding: 8px; font-size: 14px;">Dragon Ball Super</button>
              <button type="button" class="button" style="padding: 8px; font-size: 14px;">Super Dragon Ball Heroes</button>
            </div>
          </div>
          <div class="modal-footer" style="padding: 10px;">
            <button type="button" class="button" data-bs-dismiss="modal">Cancelar</button> <!-- Botón para cerrar el modal -->
            <button type="button" class="button">Aceptar</button> <!-- Botón de acción (sin funcionalidad específica) -->
          </div>
        </div>
      </div>
    </div>

    <!-- Modal de Autor -->
    <div class="modal fade modal-fullscreen" id="autorModal" tabindex="-1" aria-labelledby="instructionsModalLabel" aria-hidden="true">
      <div class="modal-dialog modal-dialog-centered-custom justify-content-center">
        <div class="modal-content window soft-shadow" style="padding:0; width: 800px; height: 600px; overflow-y: auto;">
          <div class="window-titlebar">
            <span class="title">Acerca de Akira Toriyama</span> <!-- Título del modal -->
            <button class="cerrar" data-bs-dismiss="modal">X</button> <!-- Botón para cerrar el modal -->
          </div>
          <div class="modal-body" style="padding: 20px;">
            <h2>Akira Toriyama</h2>
            <!-- Imagen del autor -->
            <img src="https://tse1.mm.bing.net/th/id/OIP.pmZjI8GFFSUPN_TzhV9z5AHaLh?rs=1&pid=ImgDetMain" alt="Akira Toriyama" style="float: right; margin-left: 20px; max-width: 200px; border-radius: 8px;">
            <!-- Información sobre Akira Toriyama -->
            <p><strong>Akira Toriyama</strong> (5 de abril de 1955 – 1 de marzo de 2024) fue un mangaka y diseñador japonés, mundialmente reconocido por crear la icónica serie <em>Dragon Ball</em>, una de las obras más influyentes en la historia del manga y el anime. Nacido en Nagoya, Japón, Toriyama comenzó su carrera en 1978 con <em>Dr. Slump</em>, una serie de comedia que le valió el reconocimiento inicial y el Premio Shogakukan en 1981.</p>
            <p>En 1984, publicó <em>Dragon Ball</em>, que se convirtió en un fenómeno global, inspirando múltiples adaptaciones al anime, películas, videojuegos y una amplia base de fanáticos. Su estilo de dibujo dinámico, narrativas emocionantes y personajes memorables, como Goku, dejaron una huella imborrable en la cultura pop. Además, Toriyama contribuyó al diseño de personajes en videojuegos como <em>Dragon Quest</em>, <em>Chrono Trigger</em> y <em>Blue Dragon</em>.</p>
            <p>A lo largo de su carrera, Toriyama destacó por su creatividad, humor y capacidad para conectar con audiencias de todas las edades. Su legado continúa inspirando a artistas y creadores en todo el mundo, incluso tras su fallecimiento en 2024.</p>
          </div>
          <div class="modal-footer" style="padding: 10px;">
            <button type="button" class="button" data-bs-dismiss="modal">Cerrar</button> <!-- Botón para cerrar el modal -->
          </div>
        </div>
      </div>
    </div>

    <!-- Modal de Créditos -->
    <div class="modal fade modal-fullscreen" id="creditsModal" tabindex="-1" aria-labelledby="instructionsModalLabel" aria-hidden="true">
      <div class="modal-dialog modal-dialog-centered-custom justify-content-center">
        <div class="modal-content window soft-shadow" style="padding:0; width: 800px; height: 600px; overflow-y: auto;">
          <div class="window-titlebar">
            <span class="title">Mensaje del sistema</span> <!-- Título del modal -->
            <button class="cerrar" data-bs-dismiss="modal">X</button> <!-- Botón para cerrar el modal -->
          </div>
          <div class="modal-body">
        <p><strong>Descripción:</strong> Proyecto web que consume una API temática de Dragon Ball, permitiendo visualizar y explorar personajes, habilidades y transformaciones de la serie. Desarrollado como práctica de consumo de APIs REST en JavaScript.</p>
        <p><strong>Características principales:</strong></p>
        <ul>
          <li>Diseño responsivo, intuitivo e interfaz amigable con el usuario</li>
          <li>Modal de series con lista de series de Dragon Ball</li>
          <li>Modal de autor con información sobre Akira Toriyama</li>
          <li>Botón de reinicio para recargar la página</li>
          <li>Funcionalidad de filtrado por nombre, raza y género</li>
          <li>Visualización de cada personaje en ventanas individuales</li>
          <li>Consumo directo de una API REST externa</li>
        </ul>
        <p><strong>Repositorio en GitHub:</strong></p>
        <a href="https://github.com/ChaoAlarcon/Dragon-Ball-API" target="_blank" class="btn btn-dark">
          <i class="bi bi-github"></i> Ver en GitHub
        </a>
      </div>
      <div class="modal-footer" style="padding: 10px;">
        <button type="button" class="button" data-bs-dismiss="modal">Cerrar</button> <!-- Botón para cerrar el modal -->
      </div>
        </div>
      </div>
    </div>

    <!-- Buscador por nombre -->
    <div class="big-title2 text-center mb-4 align-items-center">
      <input class="buscador form-text input-group-lg border-5 rounded-0 col-9"
             type="text"
             id="name"
             placeholder="Nombre del personaje"
             style="font-size: 1.5rem;" /> <!-- Campo de entrada para buscar por nombre -->
    </div>

    <!-- Filtros por raza y género -->
    <div class="filters row">
      <!-- Selector de raza -->
      <select class="form-select form-select-lg border-5 rounded-0 col-1" id="race">
        <option value="">Raza</option>
        <option value="Saiyan">Saiyan</option>
        <option value="Human">Humano</option>
        <option value="Namekian">Namekiano</option>
        <option value="Android">Androide</option>
      </select>

      <!-- Selector de género -->
      <select class="form-select form-select-lg border-5 rounded-0 col-1" id="gender">
        <option value="">Género</option>
        <option value="Male">Masculino</option>
        <option value="Female">Femenino</option>
      </select>

      <!-- Botón para ejecutar la búsqueda -->
      <button class="border-5 rounded-0 col-4" onclick="searchCharacters()">Buscar</button>
    </div>

    <!-- Área para mostrar resultados -->
    <div id="results" class="results"></div>

    <!-- Área para la paginación -->
    <div class="pagination" id="pagination"></div>
  </section>

  <!-- Inclusión de Bootstrap JS para funcionalidad interactiva -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

  <!-- Script principal -->
  <script>
    // Variables globales
    let allCharacters = []; // Arreglo para almacenar todos los personajes
    let currentPage = 1; // Página actual para la paginación
    const itemsPerPage = 20; // Número de elementos por página

    // Función para obtener todos los personajes desde la API paginada
    async function fetchAllCharacters() {
      let characters = []; // Arreglo temporal para almacenar personajes
      let page = 1; // Página inicial
      let hasMore = true; // Bandera para controlar si hay más páginas

      while (hasMore) {
        // Realiza una solicitud a la API para la página actual
        const response = await fetch(`https://dragonball-api.com/api/characters?page=${page}`);
        const data = await response.json();

        // Verifica si hay personajes en la respuesta
        if (data.items && data.items.length > 0) {
          characters = characters.concat(data.items); // Agrega los personajes al arreglo
          page++; // Incrementa el número de página
        } else {
          hasMore = false; // Termina el bucle si no hay más personajes
        }
      }

      return characters; // Devuelve el arreglo completo de personajes
    }

    // Función de búsqueda y filtrado
    async function searchCharacters() {
      // Obtiene los valores de los filtros
      const name = document.getElementById('name').value.toLowerCase();
      const race = document.getElementById('race').value;
      const gender = document.getElementById('gender').value;

      // Carga los personajes si aún no han sido cargados
      if (allCharacters.length === 0) {
        allCharacters = await fetchAllCharacters();
      }

      // Filtra los personajes según los criterios seleccionados
      const filtered = allCharacters.filter(char => {
        return (!name || char.name.toLowerCase().includes(name)) &&
               (!race || char.race === race) &&
               (!gender || char.gender === gender);
      });

      // Muestra los resultados filtrados
      displayResults(filtered);
    }

    // Muestra los personajes filtrados en la interfaz
    function displayResults(characters) {
      const resultsDiv = document.getElementById('results');
      resultsDiv.innerHTML = ''; // Limpia el área de resultados

      // Calcula los índices de inicio y fin para la paginación
      const start = (currentPage - 1) * itemsPerPage;
      const end = start + itemsPerPage;
      const pageItems = characters.slice(start, end); // Obtiene los personajes de la página actual

      // Si no hay personajes que coincidan
      if (pageItems.length === 0) {
        resultsDiv.innerHTML = '<p>No se encontraron personajes.</p>';
        return;
      }

      // Crea una tarjeta para cada personaje
      pageItems.forEach(char => {
        const card = document.createElement('div');
        card.className = 'window carta-personaje card soft-shadow m-3';
        card.style.width = '300px';
        card.style.padding = '0';

        // Contenido de la tarjeta
        card.innerHTML = `
          <div class="window-titlebar" style="background-color: #0078d7;">
            <span class="title" style="font-size: 20px;">${char.name.toUpperCase()}</span>
            <button class="cerrar" data-bs-dismiss="modal" onclick="cerrarTarjeta(this)">X</button>
          </div>
          <div class="card-body text-center" style="background-color:#fefefe; padding: 15px; border-top: 2px inset white; border-left: 2px inset white; border-right: 2px inset gray; border-bottom: 2px inset gray;">
            <img src="${char.image}" alt="${char.name}" style="width: 100px; height: auto; margin-bottom: 15px;">
            <p style="font-family: 'Press Start 2P', monospace; font-size: 20px; margin: 10px 0;">Raza: ${char.race}</p>
            <p style="font-family: 'Press Start 2P', monospace; font-size: 20px;">Género: ${char.gender}</p>
          </div>
        `;

        resultsDiv.appendChild(card); // Agrega la tarjeta al área de resultados
      });

      // Genera los botones de paginación
      generatePagination(characters.length);
    }

    // Crea los botones de paginación
    function generatePagination(totalItems) {
      const totalPages = Math.ceil(totalItems / itemsPerPage); // Calcula el número total de páginas
      const pagination = document.getElementById('pagination');
      pagination.innerHTML = ''; // Limpia el área de paginación

      if (totalPages > 1) {
        const wrapper = document.createElement('div');
        wrapper.className = 'd-flex justify-content-center gap-2 flex-wrap w-100';

        // Crea un botón por cada página
        for (let i = 1; i <= totalPages; i++) {
          const btn = document.createElement('button');
          btn.textContent = i;
          btn.className = 'border-5 rounded-0';
          btn.onclick = () => {
            currentPage = i; // Actualiza la página actual
            searchCharacters(); // Vuelve a ejecutar la búsqueda
          };

          // Resalta la página actual
          if (i === currentPage) {
            btn.style.fontWeight = 'bold';
          }

          wrapper.appendChild(btn); // Agrega el botón al contenedor
        }

        // Contenedor centrado para la paginación
        const centerContainer = document.createElement('div');
        centerContainer.className = 'd-flex justify-content-center w-100';
        centerContainer.appendChild(wrapper);

        pagination.appendChild(centerContainer); // Agrega el contenedor al área de paginación
      }
    }

    // Oculta o muestra el título principal
    function hideTitle() {
      const title = document.querySelector('.Título');
      title.classList.toggle('hidden'); // Alterna la clase 'hidden'
    }

    // Oculta o muestra la sección de botones de modales
    function hideTitle2() {
      const title = document.querySelector('.Subtítulo');
      title.classList.toggle('hidden2'); // Alterna la clase 'hidden2'
    }

    // Cierra una tarjeta de personaje con animación
    function cerrarTarjeta(boton) {
      const tarjeta = boton.closest('.card');
      if (tarjeta) {
        tarjeta.style.transition = 'opacity 0.2s ease-out'; // Añade transición
        tarjeta.style.opacity = '0'; // Reduce la opacidad para ocultar
      }
    }

    // Evento para reiniciar la página
    document.getElementById('resetBtn').addEventListener('click', () => {
      window.location.reload(); // Recarga la página
    });
  </script>
</body>
<footer class="bg-dark text-light text-center p-4 mt-5 w-100">
  <div class="container">
    <p class="mb-2">Proyecto destacado: <strong>Dragon Ball API</strong></p>
    <a href="https://github.com/ChaoAlarcon/Dragon-Ball-API" target="_blank" class="btn btn-outline-light btn-sm">
      <i class="bi bi-github"></i> Ver repositorio en GitHub
    </a>
    <p class="mt-3 mb-0">&copy; 2025 Chao An Alarcón Chen. Todos los derechos reservados.</p>
  </div>
</footer>


</html>